@model BookstoreApp.Web.ViewModels.Administration.Genres.AllGenresInTableViewModel
@{
	this.ViewData["Title"] = "All genres";
}

<h3 class="title text-dark">@this.ViewData["Title"]</h3>

@if (this.TempData.ContainsKey("Message"))
{
    <div class="alert alert-success">@this.TempData["Message"]</div>
}
<hr />

<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col"></th>
      <th scope="col" class="fw-bold fs-6">Name</th>
      <th scope="col" class="fw-bold fs-6">Is fiction</th>
    </tr>
  </thead>
  <tbody>
        @for (int i = 0; i < this.Model.Genres.Count(); i++)
        {
            var number = i + 1 + (@Model.PageNumber - 1) * Model.ItemsPerPage;
            var genre = Model.Genres.ToArray()[i];
            <tr>
                <th scope="row">@number</th>
                <td>@genre.Name</td>
                <td>@genre.IsFiction</td>
                <td>
                    <a asp-action="Edit" asp-route-id="@genre.Id">Edit</a> |
                    <form method="post" asp-action="Delete" id="deleteForm" asp-route-id="@genre.Id">
                    </form>
                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">Delete</button>                  
                </td>
            </tr>
        }
  </tbody>
</table>

<partial name="_PagingPartial" model="@Model" />

<div class="modal" tabindex="-1" id="deleteModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Delete confirmation</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this genre?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="document.getElementById('deleteForm').submit()">Delete</button>
            </div>
        </div>
    </div>
</div>